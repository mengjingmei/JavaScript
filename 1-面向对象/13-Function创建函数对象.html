<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Function</title>

    <script type="text/template" id="funcContent">
        var sum = 0;
        for(var i=0; i<arr.length; i++){
        sum += arr[i];
        }
        return sum;
    </script>

    <script>

        //函数构造函数创建Function
        var func = new Function(/*参数列表*/);
        /*** Function（）参数说明：*****
         * 1、什么都不传：创建一个空函数
         * 2、只传一个参数：这个参数就是函数体
         * 3、多个参数：最后一个参数表示函数，前面的参数是这个函数的参数
         *
         */
        var aa = "你问我爱你有多深";
        var bb = "我爱你有几分";
        var cc = "我的心也真";
        var dd = "我的爱也真";

        var printSong = new Function("a","b","c","d","console.log(a+';'+b+';'+c+';'+d);return a+b");
        console.log(printSong(aa,bb,cc,dd));

        //解决函数体内容太多，写入Function参数值太麻烦的问题
        //1、使用字符串拼接，让代码换行
        //2、使用模板的方式，将代码写入模板中
        //3、使用反引号（`）引入字符串，解决换行问题
        //例，使用Function创建一个函数求数组之和

        //1、使用字符串拼接，让代码换行
        var str1 = "var sum = 0;" +
            "for(var i=0; i<arr.length; i++){" +
            "sum += arr[i];" +
            "}" +
            "return sum;";
        var sum1 = new Function("arr",str1);
        console.log(sum1([1, 2, 3, 21]));
        //2、使用模板的方式，将代码写入模板中
        window.onload = function () {
            var scriptElement = document.querySelector("script");
            //将模板中的函数代码存入str2
            var str2 = scriptElement.innerHTML;
            var sum2 = new Function("arr",str2);
            console.log(sum2([1, 2, 3, 31]));
        };
        //3、使用反引号（`）引入字符串，解决换行问题
        var str3 = `var sum = 0;
        for(var i=0; i<arr.length; i++){
            sum += arr[i];
        }
        return sum;`;
        var sum3 = new Function("arr",str3);
        console.log(sum3([1, 2, 3, 41]));


    </script>
</head>
<body>

</body>
</html>