<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>

        //用数组做缓存
        var cache1 = [];
        var count1 = 0;
        function fibonacci1(n) {
            count1++;
            if(undefined != cache1[n-1]) {
                return cache1[n-1];

            }
            if(n <= 2) {
                cache1[n-1] = 1;
                return 1;
            }
            var temp = fibonacci1(n-1) +fibonacci1(n-2);
            cache1[n-1] = temp;
            return temp;
        }

        console.log(fibonacci1(20));
        console.log(count1);
        console.log(cache1);


        //加入闭包，保护数据
        var count2 =0 ;
        function createFib(){
            var cache2 = [];
            function fib(n){
                count2 ++;
                //1.从cache中获取数据
                if(cache2[n] !== undefined){
                    //如果缓存中有 直接返回
                    return cache2[n];
                }
                //如果缓存中没有 就计算
                if(n <= 2){
                    //把计算结果存入数组
                    cache2[n] = 1;
                    return 1;
                }
                var temp = fib(n - 1) + fib(n - 2);
                //把计算结果存入数组
                cache2[n] = temp;
                return temp;
            }
            return fib;
        }
        var fibObj = createFib();
        console.log(fibObj(20));
        console.log(count2);

        //




    </script>
</head>
<body>

</body>
</html>